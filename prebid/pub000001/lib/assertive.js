// version 1.9 //
!function(){function w(e){console.error(e);var t=new XMLHttpRequest;t.open("POST",N+"/error.php",!0),t.setRequestHeader("Content-Type","text/plain"),t.send(JSON.stringify(e,Object.getOwnPropertyNames(e)))}try{var U="1.9",N="https://api.assertcom.de",t="assertive_analytics_",R=P(),T=[],S=[],n=n||localStorage.getItem("assertiveYield")&&-1!==localStorage.getItem("assertiveYield").indexOf("debug")||-1!==u("assertiveYield").indexOf("debug");function i(e){return t.concat(e)}function a(e,t){return localStorage.setItem(i(e),t)}function D(e){return localStorage.getItem(i(e))}function d(e){return localStorage.removeItem(i(e))}function E(e){e=i(e);var t=Number(localStorage.getItem(e))||0;return localStorage.setItem(e,++t),t}function e(e){if(E(e+"PageViewN"),"client"!==e||!D(e+"UUID")){if("session"===e){if(D(e+"UUID")&&D(e+"Timeout")&&Date.now()<D(e+"Timeout"))return void a(e+"Timeout",Date.now()+18e5);a(e+"Timeout",Date.now()+18e5)}a(e+"UUID",P()),a(e+"Random",Math.random()),document.referrer?a(e+"Referrer",document.referrer):d(e+"Referrer"),a(e+"EntryPathname",window.location.pathname);var t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],n={};for(var i in t){var r=t[i],s=u(r);""!==s&&(n[r]=s)}var o=JSON.stringify(n);o!==JSON.stringify({})?a(e+"UTM",o):d(e+"UTM"),a(e+"ImpressionN",1),a(e+"PageViewN",1),E(e+"SessionN")}}function P(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,P)}function u(e){return decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function O(e){n&&console.log(e)}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var s=t[r];if(e.call(i,s,r,t))return s;r++}},configurable:!0,writable:!0}),e("client"),e("session"),-1!==u("assertiveYield").indexOf("check")&&alert("Assertive Yield: Check"),("undefined"==typeof assertive_sampleRate||assertive_sampleRate&&D("sessionRandom")<assertive_sampleRate)&&function e(){if(r)return;if("undefined"==typeof googletag||!googletag.pubadsReady)return void setTimeout(e,20);r=!0;var b=null;window.addEventListener("blur",function(){if(b){var e=new XMLHttpRequest,t=N+"?event=click&entityId="+assertive_entityId+"&impressionUUID="+T[b];e.open("GET",t,!0),e.send()}});googletag.cmd.push(function(){try{googletag.pubads().addEventListener("slotRenderEnded",function(e){try{if(e.isEmpty)return;if("undefined"==typeof assertive_entityId)return void console.error("Assertive Yield: Entity ID is mandatory and not defined, exiting...");E("clientImpressionN"),E("sessionImpressionN");var t=e.slot,n=t.getSlotElementId(),i=t.getAdUnitPath(),r=document.getElementById(n);if(!r)return;var s=r.getElementsByTagName("iframe")[0];s.addEventListener("mouseover",function(){b=n}),s.addEventListener("touchstart",function(){b=n}),s.addEventListener("mouseout",function(){b=null}),s.addEventListener("touchend",function(){b=null});var o,a=t.getHtml(),d=/(?:(?:adyjs\.renderAd\(document, |adId: |hb_adid":\[)|(?:pbadid=))['"](.*?)["']/gi.exec(a),u=d?d[1]:t.getTargeting("hb_adid")[0],l=!!d;if(u){var c=null;adyjs.adUnits.find(function(e){return e.code===n})?c=n:adyjs.adUnits.find(function(e){return e.code===i})&&(c=i);var p=adyjs.getBidResponsesForAdUnitCode(c).bids||[];if(!p.length){var m=adyjs.getBidResponses();for(var f in m)if(m.hasOwnProperty(f)){var v=m[f].bids;for(var g in v)v.hasOwnProperty(g)&&p.push(v[g])}}o=p.find(function(e){return e.adId===u})||null}var m=o?p.filter(function(e){return e.auctionId===o.auctionId}):[];T[n]=P(),O("Session UUID: "+D("sessionUUID")+", PageView UUID: "+R+", Impression UUID: "+T[n]+", AdId: "+u),O("Slot Id: "+n+", AdUnitPath: "+i),o&&O(" - Highest Prebid "+o.cpm+" from "+o.bidderCode+" with id "+u),o||O(" - No PreBids!!!"),O(" - Winner: "+(l?"prebid":"dfp (Direct/AdX/AdSense)")+" with size "+(l&&o?o.width:e.size[0])+"x"+(l&&o?o.height:e.size[1])),O("---------------");var y=null,I=null;o&&(o.appnexus?y=o.appnexus.buyerMemberId?o.appnexus.buyerMemberId:null:o.rubicon&&(y=o.rubicon.networkId?o.rubicon.networkId:null,I=o.rubicon.advertiserId?o.rubicon.advertiserId:null));var _={version:U,entityId:assertive_entityId,siteUUID:"undefined"!=typeof assertive_siteUUID?assertive_siteUUID:null,clientUUID:D("clientUUID"),sessionUUID:D("sessionUUID"),pageViewUUID:R,impressionUUID:T[n],slotId:n,adUnitPath:i,dfpResponseInformation:t.getResponseInformation()||null,dfpTargetingMap:t.getTargetingMap()||null,highestBid:o,bidResponses:m,highestPreBid:o?o.cpm:0,highestPreBid_partner:o?o.bidderCode:"",buyerId:y,brandId:I,dealId:o&&o.dealId?o.dealId:null,creativeId:o&&o.creativeId?o.creativeId:null,mediaType:o&&o.mediaType?o.mediaType:null,source:o&&o.source?o.source:null,currency:o&&o.currency?o.currency:null,netRevenue:o&&o.netRevenue?o.netRevenue:null,creative_width:l&&o?o.width:e.size[0],creative_height:l&&o?o.height:e.size[1],preBidWon:l,timeToRespond:o?o.timeToRespond:null,protocol:window.location.protocol,host:window.location.host,pathname:window.location.pathname,pathname_split:window.location.pathname.split("/").filter(function(e){return!!e}),referrer:D("sessionReferrer"),utm:D("sessionUTM"),entryPathname:D("sessionEntryPathname"),impressionN:Number(D("sessionImpressionN"))||null,pageViewN:Number(D("sessionPageViewN"))||null,client_referrer:D("clientReferrer"),client_utm:D("clientUTM"),client_entryPathname:D("clientEntryPathname"),client_impressionN:Number(D("clientImpressionN"))||null,client_pageViewN:Number(D("clientPageViewN"))||null,client_sessionN:Number(D("clientSessionN"))||null,prebid_timeout:assertive_timeout||null,prebid_version:adyjs.version||null,userState:"undefined"!=typeof assertive_userState?assertive_userState:null,layout:"undefined"!=typeof assertive_layout?assertive_layout:null,custom_1:"undefined"!=typeof assertive_custom_1?assertive_custom_1:null,custom_2:"undefined"!=typeof assertive_custom_2?assertive_custom_2:null,custom_3:"undefined"!=typeof assertive_custom_3?assertive_custom_3:null,custom_4:"undefined"!=typeof assertive_custom_4?assertive_custom_4:null,custom_5:"undefined"!=typeof assertive_custom_5?assertive_custom_5:null,bps_type:t.getTargeting("ay_bid")[0]||null,bps_algo:t.getTargeting("ay_algo")[0]||null};S.push(_);var h=new XMLHttpRequest;h.open("POST",N,!0),h.setRequestHeader("Content-Type","text/plain"),h.send(JSON.stringify(_)),O("SENT!!!")}catch(e){w(e)}}),googletag.pubads().addEventListener("impressionViewable",function(e){try{var t=e.slot.getSlotElementId();if(!T[t])return;var n=new XMLHttpRequest,i=N+"?event=activeView&entityId="+assertive_entityId+"&impressionUUID="+T[t];n.open("GET",i,!0),n.send()}catch(e){w(e)}})}catch(e){w(e)}})}();var r=!1}catch(e){w(e)}}();
// end assertive //