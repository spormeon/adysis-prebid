
<!DOCTYPE html>
<html>

    <head>
        <!-- Quantcast Choice. Consent Manager Tag -->
<script type="text/javascript" async=true>
    var elem = document.createElement('script');
    elem.src = 'https://quantcast.mgr.consensu.org/cmp.js';
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    (function() {
    var gdprAppliesGlobally = true;
    function addFrame() {
        if (!window.frames['__cmpLocator']) {
        if (document.body) {
            var body = document.body,
                iframe = document.createElement('iframe');
            iframe.style = 'display:none';
            iframe.name = '__cmpLocator';
            body.appendChild(iframe);
        } else {
            // In the case where this stub is located in the head,
            // this allows us to inject the iframe more quickly than
            // relying on DOMContentLoaded or other events.
            setTimeout(addFrame, 5);
        }
        }
    }
    addFrame();
    function cmpMsgHandler(event) {
        var msgIsString = typeof event.data === "string";
        var json;
        if(msgIsString) {
        json = event.data.indexOf("__cmpCall") != -1 ? JSON.parse(event.data) : {};
        } else {
        json = event.data;
        }
        if (json.__cmpCall) {
        var i = json.__cmpCall;
        window.__cmp(i.command, i.parameter, function(retValue, success) {
            var returnMsg = {"__cmpReturn": {
            "returnValue": retValue,
            "success": success,
            "callId": i.callId
            }};
            event.source.postMessage(msgIsString ?
            JSON.stringify(returnMsg) : returnMsg, '*');
        });
        }
    }
    window.__cmp = function (c) {
        var b = arguments;
        if (!b.length) {
        return __cmp.a;
        }
        else if (b[0] === 'ping') {
        b[2]({"gdprAppliesGlobally": gdprAppliesGlobally,
            "cmpLoaded": false}, true);
        } else if (c == '__cmp')
        return false;
        else {
        if (typeof __cmp.a === 'undefined') {
            __cmp.a = [];
        }
        __cmp.a.push([].slice.apply(b));
        }
    }
    window.__cmp.gdprAppliesGlobally = gdprAppliesGlobally;
    window.__cmp.msgHandler = cmpMsgHandler;
    if (window.addEventListener) {
        window.addEventListener('message', cmpMsgHandler, false);
    }
    else {
        window.attachEvent('onmessage', cmpMsgHandler);
    }
    })();
    window.__cmp('init', {
    		'Language': 'en',
		'Initial Screen Reject Button Text': 'I do not accept',
		'Initial Screen Accept Button Text': 'I accept',
		'Purpose Screen Header Title Text': 'Privacy settings',
		'Purpose Screen Body Text': 'You can set your consent preferences and determine how you want your data to be used based on the purposes below. You may set your preferences for us independently from those of third-party partners. Each purpose has a description so that you know how we and partners use your data.',
		'Vendor Screen Body Text': 'You can set consent preferences for each individual third-party company below. Expand each company list item to see what purposes they use data for to help make your choices. In some cases, companies may disclose that they use your data without asking for your consent, based on their legitimate interests. You can click on their privacy policies for more information and to opt out.',
		'Vendor Screen Accept All Button Text': 'Accept all',
		'Vendor Screen Reject All Button Text': 'Reject all',
		'Initial Screen Body Text': 'We and our partners use technology such as cookies on our site to personalise content and ads, provide social media features, and analyse our traffic. Click below to consent to the use of this technology across the web. You can change your mind and change your consent choices at anytime by returning to this site.',
		'Initial Screen Body Text Option': 1,
		'Publisher Name': 'Golfwrx',
		'Publisher Purpose IDs': [1,2,3,4,5],
		'UI Layout': 'banner',
		'Display UI': 'inEU',
		'Publisher Logo': 'http://www.golfwrx.com/wp-content/uploads/2017/11/flat_logo_168_r90.png',
		'Consent Scope': 'service',
		'Post Consent Page': 'http://www.golfwrx.com',
		'Non-Consent Display Frequency': 5,
    });
</script>
<!-- End Quantcast Choice. Consent Manager Tag -->
<!-- videojs -->
<script async src="https://adops.adysis.com/prebid.js"></script>
        <meta charset="utf-8" />
        <title>Prebid Server Video -- Video.js</title>
        <!-- videojs -->
        <!-- use recent version of videojs to ensure proper functioning with the iOS devices -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/video.js/6.4.0/video-js.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/video.js/6.4.0/video.js"></script>
        <!-- videojs-vast-vpaid -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/videojs-vast-vpaid/2.0.2/videojs.vast.vpaid.min.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-vast-vpaid/2.0.2/videojs_5.vast.vpaid.min.js"></script>
<script>
            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

            /* PRE-DEFINE `invokeVideoPlayer`

            Because we have no way of knowing when all the bids will be
            returned from Prebid we can't be sure that the browser will
            reach the point where `invokeVideoPlayer` is defined before
            `bidsBackHandler` fires and tries to call it.

            To prevent an "`invokeVideoPlayer` not defined" error, we
            pre-define it before we make the call to Prebid, and redefine
            it later on with the code to create the player and play the
            ad.

            In this first version, it simply stores the winning VAST to
            use later. */

            var tempTag = false;
            var invokeVideoPlayer = function(url) {
                tempTag = url;
            };

            /* Prebid video ad unit */

            var videoAdUnit = {
                code: 'video1',
                mediaTypes: {
                    video: { context: 'instream', mimes: ['video/x-flv', 'video/mp4', 'application/x-shockwave-flash', 'application/javascript', 'video/webm'], playerSize: [640, 480], minduration: 01,  maxduration: 30, protocols: [1, 2, 3, 4, 5, 6], w:640, h:480, playbackmethod: [2]  }
                },
                bids: [
                	{ bidder: 'appnexus', params: { placementId: '11971351', video: { skippable: true, playback_method: ['auto_play_sound_off'] } } },
                    { bidder: 'districtm', params: { placementId: 11937611, video: { skippable: true, playback_method: ['auto_play_sound_off'] } } }
                ]
            };

            pbjs.que.push(function() {

                // configure prebid to use prebid cache and prebid server
                // make sure to add your own accountId to your s2sConfig object
                pbjs.setConfig({
                	consentManagement: {
                	      cmpApi: 'iab',
                	      timeout: 5000,
                	      allowAuctionWithoutConsent: true
                	      },
                    cache: {
                        url: 'https://prebid.adnxs.com/pbc/v1/cache'
                    },
                    debug: true,
                    s2sConfig: {
                    	accountId: 'c9d412ee-3cc6-4b66-9326-9f49d528f13e',
                        enabled: true,
                        bidders: ['districtm','appnexus'],
                        timeout: 1000,
                        adapter: 'prebidServer',
                        endpoint: 'https://prebid.adnxs.com/pbs/v1/openrtb2/auction',
                        syncEndpoint: 'https://prebid.adnxs.com/pbs/v1/cookie_sync',
                        cookieSet: true,
                        cookiesetUrl: 'https://acdn.adnxs.com/cookieset/cs.js'
                    },
                    userSync: {
                        iframeEnabled: true,
                        syncsPerBidder: 50, // and no more than 3 syncs at a time
                        syncDelay: 6000, // 5 seconds after the auction
                      filterSettings: {
                         iframe: { bidders: ['pulsepoint'], filter: 'exclude' },
                         image:  { bidders: '*', filter: 'include' }
                         },
                       },
                       
                       useBidCache: true,
                       enableSendAllBids: false, // Default will be `true` as of 1.0
                       bidderSequence: 'random', // Default is random
                       publisherDomain: 'golfwrx.com',
                       bidderTimeout: 3500,
                       pubcid: {expInterval: 525600},
                       
                       
                });

                pbjs.addAdUnits(videoAdUnit); // add your ad units to the bid request

                pbjs.requestBids({
                    bidsBackHandler: function(bids) {
                        var videoUrl = pbjs.adServers.dfp.buildVideoUrl({
                            adUnit: videoAdUnit,
                            params: {
                                iu: '/19968336/prebid_cache_video_adunit',
                                cust_params: {
                                    section: 'blog',
                                    anotherKey: 'anotherValue'
                                },
                                output: 'vast'
                            }
                        });
                        invokeVideoPlayer(videoUrl);
                    }
                });
            });

        </script>

    </head>

    <body>

        <h2>Prebid Server Video -- video.js</h2>

        <div class="example-video-container">
            <video id="vid1" class="video-js vjs-default-skin vjs-big-play-centered" controls data-setup='{}' width='640' height='480'>
                <source src="http://vjs.zencdn.net/v/oceans.mp4" type='video/mp4'/>
                <source src="http://vjs.zencdn.net/v/oceans.webm" type='video/webm'/>
                <source src="http://vjs.zencdn.net/v/oceans.ogv" type='video/ogg'/>
            </video>
        </div>

        <script>
            var page_load_time;

            page_load_time = new Date().getTime() - performance.timing.navigationStart;
            console.log(page_load_time + "ms -- Player loading!");

            var vid1 = videojs('vid1');

            page_load_time = new Date().getTime() - performance.timing.navigationStart;
            console.log(page_load_time + "ms -- Player loaded!");

            function invokeVideoPlayer(url) {

                page_load_time = new Date().getTime() - performance.timing.navigationStart;
                console.log(page_load_time + "ms -- Prebid VAST url = " + url);

                /* Access the player instance by calling `videojs()` and passing
                 in the player's ID. Add a `ready` listener to make sure the
                 player is ready before interacting with it. */

                videojs("vid1").ready(function() {

                    page_load_time = new Date().getTime() - performance.timing.navigationStart;
                    console.log(page_load_time + "ms -- Player is ready!");

                    /* PASS SETTINGS TO VAST PLUGIN

                    Pass in a JSON object to the player's `vastClient` (defined
                    by the VAST/VPAID plugin we're using). The requires an
                    `adTagUrl`, which will be the URL returned by Prebid. You
                    can view all the options available for the `vastClient`
                    here:

                    https://github.com/MailOnline/videojs-vast-vpaid#options */

                    var player = this;
                    var vastAd = player.vastClient({
                        adTagUrl: url,
                        prerollTimeout: 500,
                        playAdAlways: true,
                        verbosity: 4,
                        vpaidFlashLoaderPath: "https://github.com/MailOnline/videojs-vast-vpaid/blob/RELEASE/bin/VPAIDFlash.swf?raw=true",
                        autoplay: true
                    });

                    page_load_time = new Date().getTime() - performance.timing.navigationStart;
                    console.log(page_load_time + "ms -- Prebid VAST tag inserted!");

                    player.muted(true);
                    player.play();

                    page_load_time = new Date().getTime() - performance.timing.navigationStart;
                    console.log(page_load_time + "ms -- invokeVideoPlayer complete!");

                });
            }

        </script>
    </body>

</html>
