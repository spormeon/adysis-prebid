<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Lazy loading in GPT</title>

    <script>googletag = window.googletag || {cmd: []};</script>
    <script async src="//www.googletagservices.com/tag/js/gpt.js"></script>

    <script>
      var inreedvidSlot, inreedvid1Slot, inreedvid2Slot, inreedvid3Slot; +       googletag.cmd.push(function() {
    	  inreedvidSlot = googletag.defineSlot('/1001824/Golfwrx.com-HB/Golfwrx.com-HB-Vid-test', [300, 250], 'inreedvidSlot').addService(googletag.pubads());
    	  inreedvid1Slot = googletag.defineSlot('/1001824/Golfwrx.com-HB/Golfwrx.comHB-Vid-test1', [728, 90], 'inreedvid1Slot').addService(googletag.pubads());
    	  inreedvid2Slot = googletag.defineSlot('/1001824/Golfwrx.com-HB/Golfwrx.comHB-Vid-test2', [728, 90], 'bottomAd').addService(googletag.pubads());
    	  inreedvid3Slot = googletag.defineSlot('/1001824/Golfwrx.com-HB/Golfwrx.comHB-Vid-test3', [728, 90], 'bottomAd').addService(googletag.pubads());
        googletag.pubads().disableInitialLoad();
        googletag.enableServices();
      });
    </script>
  </head>
  <body>
    <h1>Lazy loading in GPT</h1>

    <div id="inreedvidSlot" style="width: 300px; height: 250px">
      <script>
        // Load the top ad as soon as possible. No lazy loading required here.
        googletag.cmd.push(function() {
          googletag.display('inreedvidSlot');
          googletag.pubads().refresh();
        });
      </script>
    </div>

    <!-- Large div to make the bottom ad go below the fold. -->
    <div id="veryLongDiv" style="width: 200px; height: 1000px">intentionally left blank</div>

    <div id="inreedvid1Slot" style="width: 728px; height: 90px">
      <script>
        googletag.cmd.push(function() {
          // This will only register the slot. Ad will be fetched only 
          // when refresh is called.
          googletag.display('inreedvid1Slot');
        });
      </script>
    </div>

    <script>
      // Refresh the bottom slot when it is about to come into view.
      var refreshed = false;

      // Value of scrollY at which the ad is about to come into view.
      var adAlmostVisibleScrollValue = 300;

      // Warning: This is a sample implementation. Listening to onscroll without 
      // any throttling might not be very efficient.
      var listener = function() {
        if (window.scrollY >= adAlmostVisibleScrollValue && !refreshed) {
          googletag.cmd.push(function() {
            googletag.pubads().refresh([inreedvid1Slot]);
          });
          // Refresh the ad only once.
          refreshed = true;

          // Remove the listener now.
          window.removeEventListener('scroll', listener);
        }
      }
      window.addEventListener('scroll', listener);
    </script>
    <br/>
    <!-- Large div to make the bottom ad go below the fold. -->
    <div id="veryLongDiv" style="width: 200px; height: 1000px">intentionally left blank</div>

    <div id="inreedvid2Slot" style="width: 728px; height: 90px">
      <script>
        googletag.cmd.push(function() {
          // This will only register the slot. Ad will be fetched only 
          // when refresh is called.
          googletag.display('inreedvid2Slot');
        });
      </script>
    </div>

    <script>
      // Refresh the bottom slot when it is about to come into view.
      var refreshed = false;

      // Value of scrollY at which the ad is about to come into view.
      var adAlmostVisibleScrollValue = 300;

      // Warning: This is a sample implementation. Listening to onscroll without 
      // any throttling might not be very efficient.
      var listener = function() {
        if (window.scrollY >= adAlmostVisibleScrollValue && !refreshed) {
          googletag.cmd.push(function() {
            googletag.pubads().refresh([inreedvid2Slot]);
          });
          // Refresh the ad only once.
          refreshed = true;

          // Remove the listener now.
          window.removeEventListener('scroll', listener);
        }
      }
      window.addEventListener('scroll', listener);
    </script>
    <br/>
    <!-- Large div to make the bottom ad go below the fold. -->
    <div id="veryLongDiv" style="width: 200px; height: 1000px">intentionally left blank</div>

    <div id="inreedvid3Slot" style="width: 728px; height: 90px">
      <script>
        googletag.cmd.push(function() {
          // This will only register the slot. Ad will be fetched only 
          // when refresh is called.
          googletag.display('inreedvid3Slot');
        });
      </script>
    </div>

    <script>
      // Refresh the bottom slot when it is about to come into view.
      var refreshed = false;

      // Value of scrollY at which the ad is about to come into view.
      var adAlmostVisibleScrollValue = 300;

      // Warning: This is a sample implementation. Listening to onscroll without 
      // any throttling might not be very efficient.
      var listener = function() {
        if (window.scrollY >= adAlmostVisibleScrollValue && !refreshed) {
          googletag.cmd.push(function() {
            googletag.pubads().refresh([inreedvid3Slot]);
          });
          // Refresh the ad only once.
          refreshed = true;

          // Remove the listener now.
          window.removeEventListener('scroll', listener);
        }
      }
      window.addEventListener('scroll', listener);
    </script>
    <br/>
      </body>
</html>